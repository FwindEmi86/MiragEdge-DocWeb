# 温度系统
作为**真实季节系统**的核心配套机制，我们为服务器添加了一套极其完善的温度模拟系统。

本系统的设计原则是：**适度增加游戏沉浸感，而不会过度干扰正常的游戏体验**。每个玩家的顶栏或侧边栏都会显示**环境空气当前温度**。这会根据你所在的生物群系产生显著差异。

> 💡 核心提示：
> 1.  服务器支持为自定义物品添加专属的温度影响效果，打造独一无二的季节专属道具。

## 核心机制
### 温度的动态计算
你的个人体温会受到**数十种因素的共同影响**，包括：**季节、生物群系、穿戴的护甲、当前天气、游戏内时间、是否处于水中、食用的食物、所处高度、是否在疾跑、周围的方块**等。完整的影响因素列表可参考服务器配置说明。

默认情况下，系统会**每 2 秒重新计算一次你的个人体温**，确保数据的实时性。

### 温度的奖惩机制
当你的体温进入**危险区间**时，系统会对你施加相应的负面效果作为惩罚；反之，若你保持在**舒适区间**，服务器也可以配置对应的奖励效果。

- **默认惩罚触发阈值**：温度低于 **-10℃** 或高于 **50℃**。
- **惩罚效果包括**：饥饿、缓慢、冻伤（附带持续伤害）、无法自然回血、灼烧等。具体效果可参考下方的「温度效果详情」章节。
- **视觉提示效果**：部分效果仅为沉浸式视觉表现，不会影响游戏平衡，例如：体温高于 40℃ 时的流汗效果、环境温度低于 0℃ 时的呼气寒雾效果。

## 地狱与末地
地狱与末地不会启用温度系统。

## 温度影响因素全解析
以下是所有影响个人体温的核心因素及默认影响值。

### 1. 基础温度
每个世界都有一个**每日随机生成的基础温度**，该温度的随机范围由当前季节决定。这是体温计算的基础，**尚未包含生物群系等其他影响因素**。

| 季节   | 最低基础温度 | 最高基础温度 |
|--------|--------------|--------------|
| 冬季   | -12℃         | 0℃           |
| 春季   | 0℃           | 20℃          |
| 夏季   | 20℃          | 40℃          |
| 秋季   | 5℃           | 20℃          |

### 2. 天气影响
当前的天气状况会对基础温度产生直接的影响效果。

| 天气   | 温度影响值 |
|--------|------------|
| 晴朗   | 0℃         |
| 下雨/下雪 | -4℃       |
| 雷暴   | -5℃        |

### 3. 时间影响
游戏内的时间会影响温度，**夜晚会更冷，白天会更暖**。影响值会随时间渐变：
- **夜间（游戏时间 14800-23500）**：影响值从 0℃ 逐渐降至 **-5℃**。
- **白天（游戏时间 6000-12000）**：影响值从 0℃ 逐渐升至 **+3℃**。

### 4. 生物群系影响
你所在的生物群系是影响体温的**最关键因素之一**。不同的生物群系会带来截然不同的温度影响。

| 生物群系分类               | 温度影响值 |
|----------------------------|------------|
| 恶地、沙漠                 | +15℃       |
| 丛林                       | +12℃       |
| 热带草原                   | +10℃       |
| 沙滩、桦木森林、黑森林、繁花森林、草甸、森林、蘑菇岛、海洋、平原、沼泽 | 0℃ |
| 山地、针叶林               | -4℃        |
| 所有积雪/冰冻生物群系、积雪/冰冻山地 | -12℃ |

### 5. 高度影响
所处的海拔高度会影响体温，且**冬季的影响规则与其他季节完全不同**。
- **非冬季（春、夏、秋）**：在 Y=64 高度以上，**每上升 1 格**，体温**降低 0.08℃**。
- **冬季**：Y=64 高度以上的体温**保持不变**；在 Y=64 高度以下，**每下降 1 格**，体温**升高 0.2℃**。

### 6. 水/细雪影响
处于**水中**或**细雪**中，会对你的体温产生**巨大的负面影响**。在冬季没有任何防护的情况下跳入水中，甚至可能直接导致死亡。

更重要的是，**该影响效果会在你离开水/细雪后持续一段时间**——因为你的角色仍然处于潮湿状态。离开后，影响值会**每 2 秒自动增加 1℃**，直到影响值恢复为 0℃ 为止。细雪的影响规则与水完全一致。

| 季节       | 水/细雪温度影响值 |
|------------|------------------|
| 夏季、冬季 | -10℃             |
| 春季、秋季 | -4℃              |

### 7. 疾跑影响
**疾跑**会使你的个人体温**最高升高 +4℃**。这是一个在寒冷环境中快速提升体温的绝佳方法。

### 8. 周围方块的影响
你周围**最大 16 格半径内**的特定方块，会对你的体温产生相应的影响效果。每个方块的影响范围、影响值均可在配置文件中自定义。

#### 生效条件
1.  你的角色**必须能够直接看到该方块**，影响效果才会生效。
2.  影响值的实际大小**与你到方块的距离相关**：只有当你站在方块旁边时，才会触发配置文件中设定的**完整影响值**；距离越远，影响效果越弱。

#### 默认方块影响效果
| 方块               | 影响范围（格） | 温度影响值 |
|--------------------|----------------|------------|
| 岩浆               | 7              | +22℃       |
| 火把、灯笼         | 7              | +7℃        |
| 营火               | 7              | +15℃       |
| 火                 | 7              | +16℃       |
| 灵魂营火           | 7              | -10℃       |
| 灵魂火             | 7              | -16℃       |
| 灵魂灯笼、灵魂火把 | 7              | -7℃        |
| 冰                 | 3              | -6℃        |
| 浮冰               | 3              | -6℃        |
| 蓝冰               | 7              | -15℃       |

### 9. 护甲影响
穿戴护甲可以**有效帮助你抵御寒冷**，但在炎热的夏季，厚重的护甲也可能导致你**体温过高、中暑**。

影响值分为**单件护甲**和**全套护甲**两种计算方式，具体数值如下：

| 护甲材质   | 单件护甲影响值 | 全套护甲影响值 |
|------------|----------------|----------------|
| 皮革       | +5℃*           | +20℃*          |
| 铁、金、钻石 | +1.25℃         | +5℃            |
| 下界合金   | +0.75℃         | +3℃            |

> \* 特殊说明：皮革护甲的温度影响效果，**仅在你的个人体温低于 25℃ 时生效**。若你的体温已超过 25℃，穿戴皮革护甲将不再提供任何温度影响，避免你在夏季因穿戴皮革护甲而过热。

### 10. 食物影响
目前，插件内置了**两种与食物相关的温度影响效果**，分别对应体温过高和过低的情况：
1.  **体温过低（低于 25℃）**：当你的**饥饿值满格**时，系统会自动为你的体温**增加 +5℃**，帮助你快速回暖。
2.  **体温过高（高于 25℃）**：饮用**一瓶水**（或任何药水，不一定是普通的水），可以在**5 分钟内**为你的体温**降低 -10℃**。该效果**不可叠加**，且在生效期间，你的温度显示旁会出现一个**水瓶图标**，提示你效果仍在持续。

## 温度效果详情
当你的体温进入不同的区间时，会触发对应的效果。所有效果均可在服务器配置文件中进行开启、关闭或修改。

| 温度区间                | 触发效果                                                                 |
|-------------------------|--------------------------------------------------------------------------|
| 低于 -20℃               | 冻伤效果，每 2 秒受到半颗心的伤害（可参考截图）。|
| 低于 -15℃               | 缓慢效果                                                                 |
| 低于 -10℃               | 饥饿效果                                                                 |
| 环境空气温度低于 0℃     | 呼气寒雾效果（仅视觉，无实际影响）|
| 15℃ - 30℃ 之间          | 舒适区间，默认关闭奖励效果。服务器可配置任意药水效果作为奖励，例如抗性提升。 |
| 高于 40℃                | 流汗效果（仅视觉，无实际影响）|
| 高于 50℃                | 无法自然回血（包括食用食物、金苹果等方式的回血）|
| 高于 60℃                | 缓慢效果                                                                 |
| 高于 65℃                | 灼烧效果（可参考截图）|

## 危险温度警告机制
当你的体温达到**危险阈值**时，服务器会通过**两种方式向你发送警告**，提醒你及时采取措施调整体温：
1.  **行动栏警告**：行动栏的文字颜色会发生变化，并显示对应的警告提示。
2.  **聊天框警告**：在你的聊天框中发送警告消息。

> 提示：警告的触发阈值、显示样式、发送频率等，均可在服务器配置文件中进行自定义调整。